# Домашнее задание к занятию 10.4 «Резервное копирование» А.В. Скобкарев


---

### Задание 1

В чём разница между:

- полным резервным копированием,
- дифференциальным резервным копированием,
- инкрементным резервным копированием.

*Приведите ответ в свободной форме.*

Полное: данный метод создает полную копию набора исходных данных.  
Дифференциальное: сначала создается полная резервная копия, а затем идёт резервное копирование только измененных данных. Каждая новая дифференциальная копия больше предыдущей.  
Инкрементное: сначала создается полная резервная копия. Каждая новая инкрементная резервная копия содержит только те блоки данных, которые были изменены с момента предыдущего копирования. Через заданный период в зависимости от политики хранения создается новая полная резервная копия и цикл повторяется заново.

---

### Задание 2

Установите программное обеспечении Bacula, настройте bacula-dir, bacula-sd,  bacula-fd. Протестируйте работу сервисов.

*Пришлите конфигурационные файлы для bacula-dir, bacula-sd,  bacula-fd.*  
bacula-dir  
``` 
#
# Default Bacula Director Configuration file
#
#  The only thing that MUST be changed is to add one or more
#   file or directory names in the Include directive of the
#   FileSet resource.
#
#  For Bacula release 9.6.7 (10 December 2020) -- debian bullseye/sid
#
#  You might also want to change the default email address
#   from root to your address.  See the "mail" and "operator"
#   directives in the Messages resource.
#
# Copyright (C) 2000-2020 Kern Sibbald
# License: BSD 2-Clause; see file LICENSE-FOSS
#

Director {                            # define myself
  Name = bac-dir
  DIRport = 9101                # where we listen for UA connections
  QueryFile = "/etc/bacula/scripts/query.sql"
  WorkingDirectory = "/var/lib/bacula"
  PidDirectory = "/run/bacula"
  Maximum Concurrent Jobs = 20
  Password = "7w-y8iDom9TWYDSzT1GbKPpv0OPw3l86p"         # Console password
  Messages = Daemon
  DirAddress = 127.0.0.1
}

JobDefs {
  Name = "DefaultJob"
  Type = Backup
  Level = Incremental
  Client = bac-fd
  FileSet = "Full Set"
  Schedule = "WeeklyCycle"
  Storage = File1
  Messages = Standard
  Pool = File
  SpoolAttributes = yes
  Priority = 10
  Write Bootstrap = "/var/lib/bacula/%c.bsr"
}
```
[bacula-dir](https://github.com/redeemer271/homework/blob/srlb-14/bacula-dir.txt)  
[bacula-sd](https://github.com/redeemer271/homework/blob/srlb-14/bacula-sd.txt)  
[bacula-fd](https://github.com/redeemer271/homework/blob/srlb-14/bacula-fd.txt)  
[bacula console](https://github.com/redeemer271/homework/blob/srlb-14/10-4-1.png)  
[bacula run](https://github.com/redeemer271/homework/blob/srlb-14/10-4-2.png)  

---

### Задание 3

Установите программное обеспечении Rsync. Настройте синхронизацию на двух нодах. Протестируйте работу сервиса.

*Пришлите рабочую конфигурацию сервера и клиента Rsync.*  
[rsync.conf](https://github.com/redeemer271/homework/blob/srlb-14/10-4-3.png)  
[скрипт](https://github.com/redeemer271/homework/blob/srlb-14/10-4-4.png)  
[запуск скрипта на клиенте](https://github.com/redeemer271/homework/blob/srlb-14/10-4-5.png)  

---

### Задание со звёздочкой*
Это задание дополнительное. Его можно не выполнять. На зачёт это не повлияет. Вы можете его выполнить, если хотите глубже разобраться в материале.

---

### Задание 4*

Настройте резервное копирование двумя или более методами, используя одну из рассмотренных команд для папки /etc/default. Проверьте резервное копирование.

*Пришлите рабочую конфигурацию выбранного сервиса по поставленной задаче.*


